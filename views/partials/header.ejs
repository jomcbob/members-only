<header>
  <link rel="stylesheet" href="/styles/header.css">
  <nav>
    <div>
      <h2>
        <%= user ? "Logged in as" + " " + user.username : "Project: Members Only" %>
      </h2>
      <div class="status">
        <% if (user && user.ismember) { %>
          <% if (user && user.isadmin) { %>
            Admin
              <% } else { %>
                Member
                <% } %>
                  <% } else { %>
                    user
                    <% } %>
      </div>
    </div>
    <div class="headerLinks">
      <% links.forEach(link=> { %>
        <a class="header-link" href="<%= link.href %>">
          <%= link.text %>
        </a>
        <% }) %>
    </div>
  </nav>
</header>

<script>
  const header = document.querySelector('header');
  let lastScroll = 0;
  const threshold = 75;
  let accumulatedScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    const delta = currentScroll - lastScroll;
    accumulatedScroll += delta;

    if (currentScroll === 0) {
      // At the top of the page, fully visible
      header.style.transform = 'translateY(0)';
      accumulatedScroll = 0;
    } else if (accumulatedScroll < -threshold) {
      // Scrolled up enough
      header.style.transform = 'translateY(0)';
      accumulatedScroll = 0;
    } else if (accumulatedScroll > threshold) {
      // Scrolled down enough
      header.style.transform = 'translateY(-100%)';
      accumulatedScroll = 0;
    }

    lastScroll = currentScroll;
  });
</script>